\input{../common/header}

\title{Nix simplified grammar}
\begin{document}

\maketitle{}

\section{expressions}

\begin{grammar}
  \bfseries
  <e> ::=
    \x/ \| \c/
    \alt \e/.\a/ \| \e/.\a/ or \e/
    \alt \p/:\e/ \| \e/ \e/
    \alt \{ \e/ = \e/ \}
    \alt with \e/; \e/
    \alt (\e/ $\bm{\in}$ \t/) ? \e/ : \e/
    \alt let \x/ = \e/; $\cdots{}$; \x/ = \e/; in \e/
    \alt \o/

    <o> ::= attrNames(\e/) \| listToAttrs(\e/)
    \alt \e/ + \e/ \| \e/ $\orthplus$ \e/ \| \e/ \textbackslash \e/
    \alt deepSeq(\e/, \e/) \| seq(\e/, \e/)
    \alt functionArgs(\e/)
    % Maybe this can be typed as a function, but it is rather unlikely
    \alt Cons(\e/, \e/)

  <a> ::= \b/. $\cdots{}$ .\b/

  <b> ::= \$\{\e/\} \| \meta{l}

  <c> ::= \meta{s} \| \meta{i} \| $\cdots{}$
    \alt nil
    \alt $\cdots{}$

  <p> ::= \q/ \| \q/@\x/ \| \x/

  <q> ::= \{ \f/, $\cdots{}$, \f/ \} \| \{ \f/, $\cdots{}$, \f/ , \ldots{}\}
    \alt Cons(\x/, \x/) \| nil
    \alt \c/

  <f> ::= \x/ \| \x/ ? \e/

\end{grammar}

The grammar for types (\t/) is given in the \texttt{type-system} document.


\section{values}

\begin{grammar}
  \bfseries

  <v> ::=
    \c/
    \alt \p/:\e/
    \alt \{ \v/ = \e/; $\cdots{}$; \v/ = \e/; \}
    \alt Cons(\e/, \e/) \| nil
\end{grammar}
\end{document}
