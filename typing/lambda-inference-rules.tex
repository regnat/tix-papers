\begin{figure}
  \begin{mathpar}

    \inferrule{ }{Γ \tinfer x:Γ(x)}\lbl{IVar}
    \and\inferrule{ Γ(x) \subtypeG \tau }{Γ; \tcheck x:\tau}\lbl{CVar}

    \and\inferrule{ }{Γ \tinfer c:\Bt(c)}\lbl{IConst}
    \and\inferrule{ \Bt(c) \subtypeG \tau }{Γ \tcheck c:\tau}\lbl{CConst}

    \and\inferrule{%
      Γ;\tmatch{\accept{p}}{p} \tinfer e : τ
    }{%
      Γ \tinfer λ p.e : \accept{p} \rightarrow \tau
    } \lbl{IAbs}

  \and\inferrule{%
    \tau \subtype \Empty \rightarrow \Any \\
    \forall σ_1 \rightarrow σ_2 \in \A(\tau), \\
      Γ;\tmatch{σ_1}{p} \tcheck e : σ_2
  }{%
    Γ \tcheck λ p.e : \tau
  }\lbl{CAbs}


  \and\inferrule{%
    Γ \tinfer e_1 : \tau_1 \\ Γ \tinfer e_2 : \tau_2 \\
    \tau_1 \subtypeG \Empty \rightarrow \Any \\
    \tau_2 \subtypeG \dom(\tau_1)
  }{%
    Γ \tinfer e_1 e_2 : \tau_1 \image \tau_2
  }\lbl{IApp}

  \and\inferrule{%
    Γ \tinfer e_2 : σ \\
    Γ \tcheck e_1 : σ \rightarrow \tau
  }{%
    Γ \tcheck e_1 e_2 : \tau
  }\lbl{Capp}

  \and\inferrule{%
    \forall i \in I,
      Γ; \seq{x_{i'}: ?;}{i' \in I}; \seq{x_j : τ_j}{j \in J} \tinfer e_i : τ_i \\
    \forall j \in J,
      Γ; \seq{x_i: ?;}{i \in I}; \seq{x_{j'}: τ_{j'}}{j' \in J} \tcheck e_j : τ_j \\
    Γ; \seq{x_i: τ_i}{i \in I}; \seq{x_j : τ_j}{j \in J} \tIC e : τ
  }{%
    Γ \tIC \text{let } \seq{x_i = e_i;}{i \in I};
                       \seq{x_j : τ_j = e_j;}{j \in J}
    \text{ in } e : τ
  }\lbl{Let}

  \and\inferrule{%
    Γ \tinfer e : \tau \\
    \tau \notsubtype \lnot t \Rightarrow Γ; x : \tau \wedge t \tinfer e_1 : σ_1 \\
    \tau \notsubtype t \Rightarrow Γ; x : \tau \wedge \lnot t \tinfer e_2 : σ_2 \\
  }{%
    Γ \tinfer (x = e \in t) ? e_1 : e_2 : σ_1 \vee σ_2
  }\lbl{ITcase}

  \and\inferrule{%
    Γ \tinfer e : \tau \\
    \tau \notsubtype \lnot t \Rightarrow Γ; x : \tau \wedge t \tcheck e_1 : σ \\
    \tau \notsubtype t \Rightarrow Γ; x : \tau \wedge \lnot t \tcheck e_2 : σ \\
  }{%
    Γ \tcheck (x = e \in t) ? e_1 : e_2 : σ
  }\lbl{CTcase}

  \end{mathpar}
  \caption{Inference and check rules for the lambda-calculus with typecase\label{typing::lambda-calculus}}
\end{figure}
