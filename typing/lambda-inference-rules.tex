\begin{figure}
  \begin{mathpar}

    \inferrule{ }{Γ \tinfer x:Γ(x)}\lbl{IVar}
    \and\inferrule{ Γ(x) \subtypeG \tau }{Γ; \tcheck x:\tau}\lbl{CVar}

    \and\inferrule{ }{Γ \tinfer c:\Bt(c)}\lbl{IConst}
    \and\inferrule{ \Bt(c) \subtypeG \tau }{Γ \tcheck c:\tau}\lbl{CConst}

    \and\inferrule{%
      Γ;\tmatch{\accept{p}}{p} \tinfer e : τ
    }{%
      Γ \tinfer λ p.e : \accept{p} \rightarrow \tau
    } \lbl{IAbs}

  \and\inferrule{%
    \tau \subtype \Empty \rightarrow \Any \\
    \forall σ_1 \rightarrow σ_2 \in \A(\tau), \\
      Γ;\tmatch{σ_1}{p} \tcheck e : σ_2
  }{%
    Γ \tcheck λ p.e : \tau
  }\lbl{CAbs}


  \and\inferrule{%
    Γ \tinfer e_1 : \tau_1 \\ Γ \tinfer e_2 : \tau_2 \\
    \tau_1 \subtypeG \Empty \rightarrow \Any \\
    \tau_2 \subtypeG \dom(\tau_1)
  }{%
    Γ \tinfer e_1 e_2 : \tau_1 \image \tau_2
  }\lbl{IApp}

  \and\inferrule{%
    Γ \tinfer e_2 : σ \\
    Γ \tcheck e_1 : σ \rightarrow \tau
  }{%
    Γ \tcheck e_1 e_2 : \tau
  }\lbl{Capp}

  \and\inferrule{%
    \forall i \in \{ 1 \ldots n \},
      Γ; x_1 : ?; \cdots; x_n : ?; x'_1 : \tau'_1; \cdots; x'_m : \tau'_m \tinfer e_i : \tau_i \\
    \forall i \in \{ 1 \ldots m \},
      Γ; x_1 : ?; \cdots; x_n : ?; x'_1 : \tau'_1; \cdots; x'_m : \tau'_m \tcheck e'_i : \tau'_i \\
    Γ; x_1 : \tau_1; \cdots; x_n : \tau_n; x'_1 : \tau'_1; \cdots; x'_m : \tau'_m \tIC e : \tau
  }{%
    Γ \tIC \text{let } x_1 = e_1; \cdots; x_n = e_n; x'_1 : \tau'_1 = e'_1; \cdots; x'_m : \tau'_m = e'_m;
      \text{ in } e : \tau
  }\lbl{Let}

  \and\inferrule{%
    Γ \tinfer e : \tau \\
    \tau \not\subtype \lnot t \Rightarrow Γ; x : \tau \wedge t \tinfer e_1 : σ_1 \\
    \tau \not\subtype t \Rightarrow Γ; x : \tau \wedge \lnot t \tinfer e_2 : σ_2 \\
  }{%
    Γ \tinfer (x = e \in t) ? e_1 : e_2 : σ_1 \vee σ_2
  }\lbl{ITcase}

  \and\inferrule{%
    Γ \tinfer e : \tau \\
    \tau \not\subtype \lnot t \Rightarrow Γ; x : \tau \wedge t \tcheck e_1 : σ \\
    \tau \not\subtype t \Rightarrow Γ; x : \tau \wedge \lnot t \tcheck e_2 : σ \\
  }{%
    Γ \tcheck (x = e \in t) ? e_1 : e_2 : σ
  }\lbl{CTcase}

  \end{mathpar}
  \caption{Inference and check rules for the lambda-calculus with typecase\label{typing::lambda-calculus}}
\end{figure}
